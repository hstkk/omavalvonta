@(batch: Batch, results: List[models.dynamicforms.Results])

@import tags._
@import tags.alerts._
@import tags.tables._
@import tags.navs._

@main("Erä " + batch.toString) {
	@tabs() {
		<li><a href="@routes.Batches.index">Erät</a></li>
		<li><a href="@routes.Batches.create">Uusi</a></li>
	}
	<ul>
		<li>Tuote: @batch.product</li>
	</ul>
	@if(results != null) {
		@table() {
			@thead() {
				Lomake
				Tila
			}
			<tbody>
				@for(form <- results) {
					@tr() { <a href="controllers.dynamicforms.Results.read(batch.id, form.id)">@form</a>
						if(models.dynamicforms.Results.getIsDone(batch.id, form.id)) { @labels.success() { Valmis } } else {  @labels.important() { Kesken } } }
				}
			</tbody>
		}
	} else {
		@warning() {
			Erällä ei ole tuloksia!
		}
	}
	@if(batch.ingredientAmounts != null) {
		<h2>Erässä käytetyt raaka-aineet</h2>
		@table() {
			@thead() {
				Raaka-aine
				Vastaanottopäivämäärä
				Määrä
			}
			<tbody>
				@for(i <- batch.ingredientAmounts) {
					@tr() { @i.ingredientSupply.ingredient
							<a href="@routes.IngredientSupplies.read(i.ingredientSupply.id)">@i.ingredientSupply.received.format("dd.MM.yyyy")</a>
							@i.amount @i.ingredientSupply.unit}
				}
			</tbody>
		}
	}
}