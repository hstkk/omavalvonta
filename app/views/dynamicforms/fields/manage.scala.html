@(FORM: play.data.Form[models.dynamicforms.Field], fieldset2: models.dynamicforms.Fieldset, fields: List[models.dynamicforms.Field])

@import helper._
@import helper.twitterBootstrap._
@import tags._
@import tags.alerts._
@import tags.forms._
@import tags.navs._

@main(f.toString + " lomake"){
	<script>
		$(document).ready(function() {
			$('#fieldType').change(function () {
				var min = '#min_field';
				var max = '#max_field';
				var target = '#targetValue_field';

				switch($('#fieldType').val()){
					case "1":
					case "2":
						$(min).show();
						$(max).show();
						$(target).hide();
						break;
					case "4":
						$(min).hide();
						$(max).hide();
						$(target).show();
						break;
					default:
						$(min).hide();
						$(max).hide();
						$(target).hide();
				}
			});
		});
	</script>

	@tabs() {
		<li><a href="@controllers.dynamicforms.routes.Forms.index">Lomakkeet</a></li>
		@if(!FORM("id").valueOr("").equals("")) {
			<li><a href="@controllers.dynamicforms.routes.Forms.create">Uusi</a></li>
		} else {
			<li class="active"><a href="#">Uusi</a></li>
		}
	}
	@manageFields(fields)
	@if(!FORM("id").valueOr("").equals("")){
		<h2>Muokkaa kenttää</h2>
	} else{
		<h2>Uusi kenttä</h2>
	}
	@if(FORM.hasGlobalErrors) {
		@error() {
			@FORM.globalError.message
		}
	}
	
	@helper.form(action = controllers.dynamicforms.routes.Fields.save(fieldset2.id), 'class -> "form-horizontal"){
		@hidden() {
			@FORM("id").value
		}
		<input type="hidden" name="fieldset.id" value="@fieldset2.id"/>
		@helper.inputText(FORM("name"), '_label -> "määritys", '_class -> "control-group")
		@helper.select(FORM("when"), options = options(models.dynamicforms.When.map), '_default -> "", '_label -> "määritystiheys")
		@helper.textarea(FORM("help"), '_label -> "vaatimus")
		@helper.checkbox(FORM("isImportant"), '_label -> None, '_text -> "myyntihyväksyntään", '_showConstraints -> false)
		@helper.checkbox(FORM("isRequired"), '_label -> None, '_text -> "vaadittu", '_showConstraints -> false)
		@helper.checkbox(FORM("isSigned"), '_label -> None, '_text -> "kuitattava", '_showConstraints -> false)
		@helper.select(FORM("fieldType"), options = options(models.dynamicforms.FieldType.map), '_default -> "", '_label -> "tietotyyppi")
		@helper.inputText(FORM("min"), '_label -> "minimiarvo", '_class -> "control-group hide")
		@helper.inputText(FORM("max"), '_label -> "maksimiarvo", '_class -> "control-group hide")
		@helper.select(FORM("targetValue"), options = options(models.dynamicforms.Field.targetOptions), '_default -> "", '_label -> "kyllä/ei kentän tavoite tulos", '_class -> "hide")
		@actions()
	}
}
