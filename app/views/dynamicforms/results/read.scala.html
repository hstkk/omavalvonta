@(product: Product, results: models.dynamicforms.Results, r: List[models.dynamicforms.Result])

@import tags._
@import tags.navs._
@import tags.tables._

@main(product.toString + " " + results.form.toString + " tulokset") {
	@tabs() {
		<li><a href="@controllers.dynamicforms.routes.Results.page(product.id,0)">Lomakkeet</a></li>
		<li class="active"><a href="@controllers.dynamicforms.routes.Results.read(product.id, results.id)">Tulokset</a></li>
		<li><a href="@controllers.dynamicforms.routes.Results.update(product.id, results.id)">Muokkaa</a></li>
		<li><a href="@controllers.dynamicforms.routes.Results.history(product.id, results.id)">Historia</a></li>
		<li><a href="@controllers.dynamicforms.routes.Results.pdfify(product.id, results.id)">PDF-tiedosto</a></li>
	}
	<p>@product.description</p>

	<h2>Erät</h2>
	@table() {
		@thead() {
			Erä
			Valmistuspäivä
		}
		<tbody>
			for(batch <- batches) {
				tr() { <a href="routes.Batches.read(batch.id)">batch.id</a>
						batch.created.format("dd.MM.yyyy") }
			}
		</tbody>
	}

	<h2>Tulokset</h2>
	@table() {
		@thead() {
			Määritys
			Määritystiheys
			Vaatimus
			Tulos
			Kuittaus
			Huomioita
		}
		<tbody>
			@for(result <- r) {
				@if(result.field.fieldType == models.dynamicforms.FieldType.LEGEND) {
					<tr><th colspan="6">@result.field.name</th></tr>
				} else {
					@tr() { @result.field.name
						@result.field.when
						@result.field.help
						@if(result.isDone) { @result } @if(!result.isDone) { <span class="label label-important"> @result </span> }
						@if(result.user == null) { <span class="label label-important"> ? </span> } else { @result.user }
						@result.comment }
				}
			}
		</tbody>
	}
}